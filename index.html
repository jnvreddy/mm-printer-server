<!-- index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNP DS-RX1HS Print Server</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h2>DNP DS-RX1HS Print Server</h2>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header">
                                        <h4>Printer Status</h4>
                                    </div>
                                    <div class="card-body">
                                        <div id="printer-status">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="spinner-border text-primary me-2" role="status"
                                                    id="status-spinner">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                                <span id="status-text">Checking printer status...</span>
                                            </div>
                                        </div>
                                        <div id="printer-details" class="d-none">
                                            <div class="mb-3">
                                                <label class="fw-bold">Selected Printer:</label>
                                                <span id="selected-printer-name">None</span>
                                            </div>
                                            <div class="mb-3">
                                                <label class="fw-bold">Media Type:</label>
                                                <span id="media-type">Unknown</span>
                                            </div>
                                            <div class="mb-3">
                                                <label class="fw-bold">Prints Remaining:</label>
                                                <span id="prints-remaining">Unknown</span>
                                            </div>
                                            <div class="mb-3">
                                                <label class="fw-bold">Status:</label>
                                                <span id="printer-state">Unknown</span>
                                            </div>
                                        </div>
                                        <button id="refresh-status" class="btn btn-sm btn-outline-primary">Refresh
                                            Status</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header">
                                        <h4>Available Printers</h4>
                                    </div>
                                    <div class="card-body">
                                        <select id="printer-select" class="form-select mb-3">
                                            <option value="">Loading printers...</option>
                                        </select>
                                        <button id="set-default-printer" class="btn btn-sm btn-outline-primary">Set as
                                            Default</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h4>Print Test</h4>
                                    </div>
                                    <div class="card-body">
                                        <form id="print-form" enctype="multipart/form-data">
                                            <div class="mb-3">
                                                <label for="file-upload" class="form-label">Upload Image or PDF</label>
                                                <input class="form-control" type="file" id="file-upload" name="file"
                                                    accept=".jpg,.jpeg,.png,.gif,.pdf">
                                            </div>
                                            <div class="mb-3">
                                                <label for="print-size" class="form-label">Print Size</label>
                                                <select class="form-select" id="print-size" name="print-size">
                                                    <option value="4x6">4x6 (Standard)</option>
                                                    <option value="2x6">2x6 (Photo Strip)</option>
                                                    <option value="6x8">6x8 (Large)</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="print-finish" class="form-label">Finish</label>
                                                <select class="form-select" id="print-finish" name="print-finish">
                                                    <option value="glossy">Glossy</option>
                                                    <option value="matte">Matte</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="copies" class="form-label">Copies</label>
                                                <input type="number" class="form-control" id="copies" name="copies"
                                                    value="1" min="1" max="10">
                                            </div>
                                            <button type="submit" class="btn btn-primary"
                                                id="print-button">Print</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h4>Recent Print Jobs</h4>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>Job ID</th>
                                                        <th>File</th>
                                                        <th>Printer</th>
                                                        <th>Status</th>
                                                        <th>Time</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="print-jobs">
                                                    <tr>
                                                        <td colspan="5" class="text-center">No print jobs yet</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h4>API Documentation</h4>
                    </div>
                    <div class="card-body">
                        <h5>Print from Website</h5>
                        <p>To integrate printing into your website, use the following endpoint:</p>
                        <pre><code>
POST /api/print
Content-Type: multipart/form-data

Form Data:
- file: The image or PDF file to print
- printerName: Name of the printer (optional)
- options: Print options in JSON format (optional)
                        </code></pre>
                        <h5>Example</h5>
                        <pre><code>
// JavaScript example
const formData = new FormData();
formData.append('file', fileInput.files[0]);
formData.append('printerName', 'DNP_DS_RX1HS');
formData.append('options', JSON.stringify({
  copies: 1,
  finish: 'glossy',
  size: '4x6'
}));

fetch('http://yourserver:3000/api/print', {
  method: 'POST',
  body: formData
})
.then(response => response.json())
.then(data => console.log(data))
.catch(error => console.error('Error:', error));
                        </code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>

</html>